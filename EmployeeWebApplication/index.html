<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
</head>
<body>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>

    <ul id="employeeList"></ul>

    <input id="firstNameInput" placeholder="FirstName" />
    <input id="lastNameInput" placeholder="LastName" />
    <input id="addressInput" placeholder="Address" />
    <input id="ageInput" placeholder="Age" />
    <input id="salaryInput" placeholder="Salary" />
    <button id="createButton">Create employee!</button>
    <button id="updateButton">Update employee!</button>
    <button id="deleteButton">Delete employee</button>

    <script type="text/javascript">
        $.ajax({

            url: '/api/Employee/Get',

            method: 'GET',

            dataType: 'json',

            success: populateEmployeeList

        });

        //call to get the list of products

        function populateEmployeeList(employees) {

            $.each(employees, function (index) {

                var employee = employees[index];

                $("#employeeList").append('<li id=employee' + employee.FirstName + '>' + employee.FirstName + ' ' + employee.LastName + '</li>');

            });

        }

        //method to be called on success

        
        //when we click the button "#createButton", we:
        $("#createButton").click(function () {//

            //Create the variable employee
            var employee = {//

                FirstName: $("#firstNameInput").val(),

                LastName: $("#lastNameInput").val(),

                Address: $("#addressInput").val(),

                Age: $("#ageInput").val(),

                Salary: $("#salaryInput").val()

            };//
            //send a request with this new vatiable to controller
            $.ajax({//

                url: '/api/Employee/CreateEmployee',//to the CreateEmployee method

                type: 'POST',

                data: employee

            });//

        });//

        $("#updateButton").click(function () {
            var employee = {
                FirstName: $("#firstNameInput").val(),
                LastName: $("#lastNameInput").val(),
                Address: $("#addressInput").val(),
                Age: $("#ageInput").val(),
                Salary: $("#salaryInput").val()
        };

        $.ajax({
            url: 'api/Employee/Update',
            type: 'POST',
            data: employee
        });

        });

        $("#deleteButton").click(function () {
            var employee = {
                FirstName: $("#firstNameInput").val(),
                LastName: $("#lastNameInput").val(),
                Address: null,
                Age: null,
                Salary: null 
            };

            $.ajax({
                url: 'api/Employee/Delete',
                type: 'DELETE',
                data: employee
            });

        });

        // this is called when the button is clicked
    </script>
</body>
</html>
